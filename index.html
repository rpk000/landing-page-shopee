<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Lili - Assistente Inteligente</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body {
  font-family: Arial, sans-serif;
  background: #0f172a;
  color: #fff;
  padding: 20px;
}
h2 {
  margin-top: 0;
}
button {
  padding: 14px 20px;
  font-size: 16px;
  background: #22c55e;
  color: #000;
  border: none;
  border-radius: 8px;
  cursor: pointer;
}
#log {
  margin-top: 20px;
  background: #020617;
  padding: 15px;
  border-radius: 8px;
  min-height: 120px;
}
p {
  margin: 6px 0;
}
</style>
</head>

<body>

<h2>ðŸ¤– OlÃ¡, eu sou a Lili</h2>
<p>Toque no botÃ£o e fale comigo</p>

<button onclick="start()">ðŸŽ¤ Falar com a Lili</button>

<div id="log"></div>

<script>
// =====================
// FUNÃ‡Ã•ES BÃSICAS
// =====================
const log = msg => {
  document.getElementById("log").innerHTML += `<p>${msg}</p>`;
};

const speak = text => {
  const u = new SpeechSynthesisUtterance(text);
  u.lang = "pt-BR";
  u.rate = 1;
  u.pitch = 1.2;
  speechSynthesis.speak(u);
};

// =====================
// MEMÃ“RIA DA LILI
// =====================
let memoria = JSON.parse(localStorage.getItem("lili_memoria")) || {};

// =====================
// RECONHECIMENTO DE VOZ
// =====================
function start() {
  if (!("webkitSpeechRecognition" in window)) {
    log("âŒ Seu navegador nÃ£o suporta reconhecimento de voz");
    speak("Seu navegador nÃ£o suporta reconhecimento de voz");
    return;
  }

  const rec = new webkitSpeechRecognition();
  rec.lang = "pt-BR";

  rec.onstart = () => {
    log("ðŸŽ§ Lili estÃ¡ ouvindo...");
  };

  rec.onresult = e => {
    const texto = e.results[0][0].transcript.toLowerCase();
    log("VocÃª: " + texto);
    responder(texto);
  };

  rec.onerror = e => {
    log("Erro: " + e.error);
  };

  rec.start();
}

// =====================
// INTELIGÃŠNCIA DA LILI
// =====================
function responder(texto) {
  let resposta = "";

  // comandos fixos
  if (texto.includes("seu nome")) {
    resposta = "Meu nome Ã© Lili";
  }

  else if (texto.includes("o que vocÃª aprendeu")) {
    const itens = Object.keys(memoria);
    resposta = itens.length
      ? "Eu aprendi: " + itens.join(", ")
      : "Ainda nÃ£o aprendi nada novo";
  }

  // ensinar algo novo
  else if (texto.includes("aprenda")) {
    // exemplo: "aprenda que bitcoin Ã© volÃ¡til"
    const aprender = texto.split("aprenda")[1];
    if (aprender) {
      memoria[aprender.trim()] = true;
      localStorage.setItem("lili_memoria", JSON.stringify(memoria));
      resposta = "Aprendi mais uma coisa com vocÃª";
    } else {
      resposta = "O que vocÃª quer que eu aprenda?";
    }
  }

  // lembrar algo aprendido
  else {
    const lembrado = Object.keys(memoria).find(p => texto.includes(p));
    if (lembrado) {
      resposta = "Eu lembro que vocÃª me ensinou que " + lembrado;
    } else {
      resposta = "Ainda estou aprendendo. VocÃª pode me ensinar algo dizendo, aprenda que...";
    }
  }

  log("Lili: " + resposta);
  speak(resposta);
}
</script>

</body>
</html>
